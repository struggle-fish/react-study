<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="theme-color" content="#000000">
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json">
    <title>React App</title>
    <style>
      .box {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        background: red;
        position: absolute;
        left: 0;
      }
      .box1 {
        top: 100px;
      }
      .box2 {
        top: 250px;
      }
      .box3 {
        top: 400px;
      }
    </style>
  </head>
  <body>
    <div id="root">
      <div class="box box1"></div>
      <div class="box box2"></div>
      <div class="box box3"></div>
    </div>
  </body>
  <script>
    let $ = document.querySelector.bind(document);
    // function move(ele, target, callback) {
    //   let left = 0;
    //   let timer = setInterval(() => {
    //     if (left >= target) {
    //       clearInterval(timer);
    //       return callback(); 
    //     }
    //     left++;
    //     ele.style.left = left + 'px';

    //   }, 6);
    // }
    // move($('.box1'), 300, function() {
    //   // alert('ok');
    //   move($('.box2'), 200, function() {
    //     // alert('ok');
    //     move($('.box3'), 500, function() {
    //       alert('ok');
    //     });
    //   });
    // });

    function move(ele, target) {
      return new Promise((resolve, reject) => {
        let left = 0;
        let timer = setInterval(() => {
          if (left >= target) {
            clearInterval(timer);
            return resolve(); 
          }
          left++;
          ele.style.left = left + 'px';

        }, 6);
      });
    }
    // move($('.box1'), 500).then(()=> {
    //   return move($('.box2'), 500)
    // }).then(() => {
    //   return move($('.box3'), 500)
    // });
    // function *gen (){
    //   yield move($('.box1'), 500)
    //   yield move($('.box2'), 500)
    //   yield move($('.box3'), 500)
    // }
    // function co(it){
    //   return new Promise((resolve, reject) => {
    //     function next () {
    //       let { value, done } = it.next();
    //       if (!done){
    //         value.then(() => {
    //           next();
    //         });
    //       } else {
    //         resolve();
    //       }
    //     }
        
    //     next();
    //   });
    // }
    // co(gen()).then((data)=> {
    //   console.log('执行完了', data);
    // });

    async function gen() {
      let d = 100;
      try {
        let a = await move($('.box1'), 500);
        let b = await move($('.box2'), 500);
        let c = await move($('.box3'), 500);
      } catch(e) {
        console.log(e);
      }
      return d;
    }
    gen().then((data)=> {
      console.log(data);
    });
</script>
</html>
